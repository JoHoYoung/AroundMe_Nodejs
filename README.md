# Proj_SoSo

## 2018.07.04 Developing Note
* * *

#### 1. 로그인 기능의 추가 . -> 몽고디비를 활용하여 저장, 비교하는 기능 구현
> 추가할점) 비밀번호를 암호화 하여 db에 저장해야함.

#### 2. 게시판 기능의 추가 . -> 글 작성, 저장하되 글 스키마에 유저아이디 속성을 두어 작성자를 비교함.
> 추가할점) 추천수 기능이 필요할지도 모름, 또는 여러가지 기능이 필요할지도모름. 일단은 스키마를 간단하게 설정하되 나중에 추가사항에 따라 스키마를 변경하여야함.

#### 3. 게시판 글들의 목록 -> 글을 눌렀을때 그 글들만의 각각 페이지로 구현해야함. 거기에 들어가야함. 동적으로 EJS가 필요할듯.
 
#### 4. EJS 템플릿 공부 -> EJS를 어느정도 사용하여 동적인 뷰파일, 게시판 글 목록들을 구현하는 것을 공부하였다. 좀더 공부하여 여러가지 기능을 구현할 수 있을 수준이 되어야함.

* * *
## 2018.07.05 Developing Note

#### 1. 회원가입의 비밀번호를 암호화하여 db에 저장하는 기능 구현.

#### 2. 글 목록에서 제목을 눌렀을때 글만의 페이지로 이동하는 기능 구현.

#### 3. 댓글기능 구현.

#### 4. 댓글, 글들의 삭제기능 구현. 현재 세션의 사용자와 비교하여, 작성자만 삭제, 수정 할 수 있게끔 구현 완료.
> 추가할점) 게시판글 ,제목, 댓글의 수정기능 구현
.
#### 5. 게시판 글들의 스키마 수정, 다듬음 추천수 기능 구현을 위해 스키마 수정. 추후 구현 예정.

#### 6. EJS 템플릿에 대한 이해 수준이 올라감. 동적으로 게시판을 보여주는 페이지 구현, 그리고 하나의 EJS파일로 모든 게시글의 자체 페이지 구현 완료하였음.

#### 7. 라우트 정리, 코드정리 할 필요 있음.

* * *

## 2018.07.06 Developing Note

#### 1. 작성자가 게시글 제목, 내용 수정하는 기능 추가.

#### 2. 댓글 수정기능 실패
> 작은 창을 띄워 거기에 적은내용으로 수정하는 기능을 구현하려 하는데 데이터 전달하는..?방법이 난처해서 실패하였다.. 다음주 안에 구현하자.

#### 3. 대부분의 html 파일을 ejs로 바꾸었다. ejs에 대한 이해가 조금씩 생기는 중. 
> ejs는 정말 편한것 같다. html을 동적으로 구현할 수 있다니. 대단함.
* * *
## 2018.07.08 Developing Note

#### 1. 조회수 기능 추가. 
> view의 숫자를 늘린후 save를 하는 과정이 find로 하면 실패하고 findOne을 한후 save를 하면 되었다. 진짜 몇시간 동안 했는데 도대체 왜 안되는지 모르겠다. 다른 부분에서는 그냥 find로 해도 됐는데 진짜 왜!!!!!!!!!! ...하 너무 힘들었다 몇시간동안 실패했다.

#### 2. 게시글 추천기능 추가.
> 같은 사용자는 해당게시물에 한번밖에 추천 못하고, 한번더 누를시 추천이 취소되는 기능 구현.. 힘들었다.

#### 3. 페이지를 10개씩 나누어서 보여주는 기능 구현
> 이것도 정말 힘들었다.. 현재는 모든 게시물 수를 받아서 게시글 페이지의 Max범위를 산출하여야 하는데 도대체 왜 전체 데이터의 갯수를 받아오는 count가 작동 안하는지 모르겠다. 이것도 몇시간 했는데 진짜 해결할 수 있긴 한걸까???

#### 4. ejs에서 계속 에러나서 힘들었다. brace가 잘못된건지 ..계속 같은부분 뚫어져라 봤을때 못찾았는데 다지우고 처음부터 하니 작동하였다 왜 안되는지 모르는 에러, 왜 되는지 모르는 상황 이런상황이 제일 힘든것 같다.

#### 5. 댓글 수정기능, 10개씩 나눠서 보여주는 기능의 Max 페이지 범위를 더 만들 필요가 있다.

* * *

## 2018.07.11 Developing Note

#### 1. 사진 업로드 기능 추가. 
> fs모듈을 이용해 사진을 업로드 기능을 구현 하였다. 업로드된 사진 파일은 db에 저장되며 각 사진들은 파일명으로 각 게시글에 귀속된다. 게시글을 열었을때 귀속된 파일명을 참조하여 게시물에 같이 올린 사진이 나타나게 하였다. -> 사진업로드시 미리보기, 그리고 글 삭제, 수정시 이미지파일의 삭제, 수정 하는 기능을 추가하여야 한다. 사진업로드 미리보기는 정말 오래걸릴것 같은 예감이 든다.

#### 2. 글작성자가 글삭제, 수정을 눌렀을때 바로 실행하지 않고 사용자에게 중요한 작업이니 만큼 한번더 묻는 팝업이 뜨는 기능 추가.
> mordal을 이용하여 한번 더 묻도록 구현하였다. 낯선 작업이라 오래 걸린것 같다. bootstrap없이 자체적으로 mordal을 디자인 하여 사용해보고 싶다. 아직은 backend쪽 공부중이라 어느정도 되면.. 10월쯤? 이면 front를 공부할 여유가 생겨 시작할것 같다. 잘은 모르지만 vue.js를 배워보고 싶다.

#### 3. 모든 html파일 ejs화.
> 처음에 기초를 구현할때는 html로 충분하지만 점점 개발한 것들이 쌓여가다 보니 html로는 한계가 있는것 같다. ejs는 정말 좋은 템플릿 인것 같다. 아직도 brace닫는 부분에서는 실수가 나서 10분씩 눈을 치켜뜨고 찾곤 한다.

#### 4. 게시글 카운트를 정상적으로 받아와서 게시글을 10개단위로 페이징 하는것에 성공하였다.

* * *

## 2018.07.13 Developing Note

#### 1. 사진 업로드 기능 보수작업 ) 다중 업로드 기능 추가. 
> multer 모듈을 활용해 사진을 여러장 올리게끔 구현 하였다. 사진을 올리기전에 미리 보여주는 작업은 너무 어려운것 같다. 몇시간을 투자했으나 아직 구현하지 못하였다. 반드시 구현하고 말것이다.

#### 2. 글 작성 보수작업.  
> 지금 진행하는 soso 창업팀 프로젝트에 따라 게시글을 작성할때 작성자의 지역을 입력하는 것이 필요해 보였다. button dropdown 식으로 구현하였다. 그리고 글작성을 보수하였다. 지금까지는 글제목, 내용이 비어있어도 작성이 가능했는데 글제목 또는 내용이 비어있으면 작성이 불가능하여 error 메세지가 뜨도록 구현하였다. 지금은 InnerHTML로 에러메세지를 해당 위치에 추가하는 낮은 수준이지만 곧 css로 입력되지 않은 부분의 바깥박스가 옅은 붉은색으로 바뀐다던가 하는 기능으로 바꿀것이다. 알고리즘은 모두 작성해 놓았으니 css만 익혀 바꾸면 되는 것이다.

#### 3. 모든 html파일 ejs화.
> 처음에 기초를 구현할때는 html로 충분하지만 점점 개발한 것들이 쌓여가다 보니 html로는 한계가 있는것 같다. ejs는 정말 좋은 템플릿 인것 같다. 아직도 brace닫는 부분에서는 실수가 나서 10분씩 눈을 치켜뜨고 찾곤 한다.

#### 4. 이것 저것 혼자서 backend쪽을 구현하다 보니 정신이 없다. 까먹고 불가능하다고 생각하던 댓글 수정 기능은 Mordal을 활용하면 가능할 것 같다. 개발한게 쌓이다보니 점점 해답을 찾는 능력이 향상되는것 같다.

* * *

## 2018.07.15 Developing Note

### 경! 축! 드디어 미리보기 구현 성공하다.

#### 1. 드디어 사진 올리기전 미리보기 구현에 성공하였다. 이것때문에 몇일 몇시간을 고생했는지 모르겠다.
> 사진을 올리기전에 미리보기 기능을 구현하느라 정말 며칠간 애먹었는데 드디어 성공했다. 한술 더떠 게시글을 작성하기전 올린 사진을 클릭하면 업로드 취소 기능까지 만들었다. 휴.. 정말 기나긴 여정이었다. 이제 남은것은 사진을 올려 이미 작성한 게시글 수정을 눌렀을때 올렸던 사진들이 사진 올리기 미리보기처럼 뜨고 그것또한 삭제, 할 수 있어야한다. 그리고 이미 업로드 되었던 사진을 삭제 하려고 하면.. 무엇을 삭제할지 정보를 받아서 db 및 사진저장소 에서 삭제해야 하는데 어떻게 해야하는지 정말 고민이다.. 큰일이다..

#### 2. 핫 게시판 구현.  
> 게시글들 중 추천수가 10개 이상인 것들을 모아놓은 핫 게시판을 구현하였다. 몽고db 쿼리 $gt를 이용해서 하였다. 나중에는 mysql로도 구현해보고 싶은데... 정말 막막하다. 언어가 너무많고 프레임워크도 너무많은데 db도 너무 많으니 .. 이걸 어떻게 다 알고 해보지? 정말 큰일이다. 일단 지금 공부하는 Node js , Mongodb가 익숙해 지고 나면 Spring, Mysql을 공부해 보고 싶다.

#### 3. Front를 공부중인 멤버들의 Front 작업
> 나포함 3인 팀에서 2명의 멤버들은 Front 작업을 공부후 수행해 주고 있다. 완벽한 디자인은 아니라도 컨텐츠들의 배치만 조금 다듬었을 뿐인데 페이지가 확 달라보인다. 이게 내가만든건가 싶다. 내가 만든건 아니지만... Back은 내가했다 아무튼 나도 나중에 front를 공부해야겠다 흥미로워 보인다. 

## 2018.07.17 Developing Note

#### 1. 게시글 수정시, 업로드한 사진 보기, 해당 사진 클릭시 삭제기능 구현. 
> 이미 업로드한 사진들을 업로드할때 사진 미리보기 하는것과 같은 모양으로 보여주고, 클릭시 삭제 기능을 구현하였다. 클릭하면 index를 받고, 여러개일 경우 그때마다 push하여 서버로 배열을 전달, 그 index들에 해당하는 사진파일 삭제, 게시글 스키마에서 사진 이름을 저장하는 배열 splice를 해주었다. 이때 큰 문제가 생겼는데 splice를 하니 배열들이 앞으로 당겨지고, 비어있는 index의 사진을 제거하자니 에러가 났다. 방법을 한참 고민하다 인덱스들을 내림차순으로 sorting한 후 splice를 진행하니 문제가 해결 되었다. 이 아이디어를 떠올리고 나니 뿌듯했다ㅋ. 아무튼 정말 오래걸린 작업이었다. 3일내내 노트북 앞에서 머리를 잡아 뜯었다.

* * *

## 2018.07.19 Developing Note

#### 1. view파일들 최소화.
> 게시판과, 핫게시판 두개를 만들었었는데 개발을 하다 문득 떠오른 생각이 이 파일들이 따로 필요한가 였다. 차이는 내용의 차이 뿐이었다. 그래서 핫 게시판의 ejs파일을 지우고 게시판 ejs파일로 통합하였다.

#### 2. 게시글 검색기능 구현.  
> 몽고db의 쿼리 $regex를 사용하여 검색기능을 구현하였다. 검색결과 게시글들도 하나의 ejs파일에 다 렌더링 하니, 코드가 길고 복잡해졌다. view파일을 최소화 하는건 잘하는것 같은데 내용만 다른 페이지 라면 현업에서는 어떻게 하고 있는지 궁금하다. 현업에서는 코드가 훨씬 길텐데 내용만 다르더라도 여러개의 ejs파일로 관리하는지 아니면 나처럼 하나로 하는지.. 아직 공부단계라 잘 모르지만 나중엔 현업에서는 어떻게 하는지 알고싶다. if문이 많은데 if문은 느리다고 알고있다. 이게 나중에 문제가 되지는 않을까 걱정이다.

#### 3. 회원가입 과정, user 스키마 추가 수정.
> 아이디, 비밀번호, 이름만 입력하면 회원가입이 가능했었다. 하지만 더 추가할 필요가 있을것 같아 성별, 휴대폰 번호, 이메일 등 여러가지를 추가하였다. 휴대폰 인증도 하고싶은데... 방법이 잘 찾아지질 않는다. 일단 이메일 인증으로 가입하는 방법을 찾아보고 있다. 이메일 인증 정도는 7월 안에 구현할 생각이다. 이메일 인증으로 일단 구현하고 나중에 휴대폰 인증을 추가해야 겠다.